# Исследование объявлений о продаже квартир

<br/>
<table>
    <tr>
        <td><b>Название проекта (+ссылка)</b></td>
        <td><b>Тема проекта и задача проекта</b></td>
        <td><b>Используемые инструменты</b></td>
        <td><b>Темы инф. материалов и рекомендации ревьювера</b></td>
    </tr>
    <tr>
        <td><a href="https://github.com/DinoWithPython/ds_practicum_projects/blob/main/learning_projects/Анализ%20рынка%20недвижимости%20Питера/02%20Исследование%20объявлений%20о%20продаже%20квартир.ipynb" target="_blank"><b>"Продажа квартир в Санкт-Петербурге — анализ рынка недвижимости"</b></a></td>
        <td><b>Исследовательский анализ данных.</b> Используя данные сервиса Яндекс.Недвижимость, определить рыночную стоимость объектов недвижимости и типичные параметры квартир</td>
        <td><b>pandas, seaborn, корреляция, определение типа дат с учетом разных лет</b></td>
        <td>Kaggle, astype('datetime64[M]') для корректного учета месяца, habr по предобработке, seaborn</td>
    </tr>
</table>

## Общий вывод и рекомендации заказчику
В рамках выполнения задачи мне нужно было научиться определять рыночную стоимость объектов недвижимости — установить параметры. Это позволит построить автоматизированную систему: она отследит аномалии и мошенническую деятельность.
    
При предобработке данных были обнаружены пропуски:
* `is_apartment` - апартаменты kb (булев тип). В столбце явно должны присутствовать булевы значения, поскольку встречается как True, так и False. В какой-то момент что-то пошло не так и данные потерялись, вероятно при объединении данных в одну таблицу(массив). Заменить их на какое-то одно булево значение невозможно, поскольку в этом случае большинство данных будут не верны. 
* `parks_nearest` и `ponds_nearest` - расстояние до ближайшего парка (м) и водоёма. Заполнять пропущенные данные для столбцов при доле пропусков выше 60% не представляется возможным. В этом случае количество данных с пропусками значительное и заменить их на какое-то среднее или медианное значение приводит к сильному искажению данных.
* `balcony` - число балконов. Для данного столбца пропущенные значения заменены на ноль, тип столбца приведен к целочисленному типу, поскольку 0.5 балкона быть не может.
* `ceiling_height` - высота потолков (м). Совсем выбиваются из всех высот это три квартиры с высотами потолков для собачей будки или домика для садовых гномов, поскольку ни собаки, ни садовые гномы пока не научились пользоваться интереностом и не имеют прав заниматься продажей недвижимости, то причисляем эти значения к ошибкам. Пропуски заполняю медианным значением.
* `airports_nearest` - расстояние до ближайшего аэропорта в метрах (м). Не заполняем картографические данные чем-либо, чтобы не искажать выборку.
* `cityCenters_nearest` - расстояние до центра города (м). Аномальных значений в данном столбце нет. Пропущенные значения заполнены медианным значением.
* `ponds_around3000` и `parks_around3000` - число водоемов и парков в радиусе 3 км. Пропуски заполнены нулевыми значениями, поскольку в данных встречаются числа от 0 до 3, то логично предположить, что пропуски это нулевые значения.
* `days_exposition` - сколько дней было размещено объявление (от публикации до снятия). Смысла заполнять пустые значения нет. Если объявление не снято, значит оно еще актуально. Заполнять какими-либо средними данными нет смысла.
* `kitchen_area` - площадь кухни в квадратных метрах (м²). Никаким значением пропуски заполнить нельзя, иначе я внесу шум в данные и следующие столбцы типа жилой площади исказятся. Оставляю как есть.
* `living_area` - жилая площадь в квадратных метрах (м²). Оставляю как есть по причине искажения общей площади при заполнении чем-либо.
* `floors_total` - всего этажей в доме. Доля пропусков здесь менее 5% и для экономии времени их можно удалить.
* `locality_name` - название населённого пункта. Доля пропусков здесь менее 5% и для экономии времени их можно удалить.

Затем была проведена обработка названий населенных пунктов. Некоторые совпадали по имени, но различались по регистру, отличались по "е" и "ё". Наименования населенных пунктов были унифицированы. Затем данные столбцов были переведены в соответсвующие им типы.

Логично было добавить в данные новые столбцы, что помогут при анализе:
* `price_per_square` - цена одного квадратного метра.
* `day_publucation`, `month_publucation`, `year_publucation` - день, месяц и год публикации объявления.
* `type_of_flour` - тип этажа квартиры(первый, последний, другой).

По результатам исследовательского анализа можно сделать следующие выводы:
После проведенной работы можно сделать несколько выводов.
* Отсутствие некоторых данных может создать проблемы при анализе. Не всегда есть возможность заполнить данные средним или медианным значением и не испортить их. С другой стороны артефакты или отсутсвие каких-то данных могут возникать по огромному количеству причин и добиться идельно подготовленных данных для анализы очень сложно;
* При заполнении пропусков важно рассмотреть влияние этого на смежные данные, не изменилась ли достоверность этих данных, как изменилась зависимость от остальных параметров;
* После проведенного анализа можно сделать вывод, что стоимость квартиры зависит от ряда факторов, которые в свою очередь так же зависят от ряда других параметров. Например, наблюдается тенденция роста цены квартиры в зависимости от количества комнат до 3 комнат. После чего стоимость остается примерно на одном уровне до 5 комнат, а затем падает. Дело вовсе не в том, что выгоднее купить квартиру с 10 комнатами, чем двушку, а при большом количестве комнат в продажу выставляется не целая квартира, а отделньые комнаты, которые приближаются к цене однушки. Так же на стоимость квартиры влияет ряд факторов по части близости центра города и парков. Чем более облагороженная территория с большим количеством транспорта(для центра), тем выше стоимость квартиры. Примерно такой же эффект и возникает при увеличении площади. Квартира в центре на 15 квадратных метров, может стоить дороже квартиры(или дома) на удалении в 60 км с площадью в 50 квадратных метров. Если отойти от параметров оказывающих непосредственное влияние на цену квартиры, то можно еще так же рассмотреть сезонность и дату выставления объявления. В какие дни преимущественно покупаются квартиры, в каком месяце и какая тенденция наблюдается  с каждым годом по росту цен, количеству продаж и так далее. 
 
    
#### 📖 **Полезные ссылки**

* [Полезные ссылки про визуализацию 1](https://habr.com/ru/company/otus/blog/540526/)
* [Полезные ссылки про визуализацию 2](https://pythonru.com/biblioteki/seaborn-plot)
* [Работы аналитиков на Kaggle](https://www.kaggle.com/notebooks/)

#### Книги
* Уэс Маккинни «Python и анализ данных. 3-е издание»

#### Материалы
* [Kaggle | исследовательский анализ данных — Jupyter-тетрадка](https://www.kaggle.com/code/emstrakhov/eda-with-pandas/notebook)
* [Блог Дмитрия Макарова | практика EDA, датасет «Титаник»](https://www.dmitrymakarov.ru/data-analysis/eda-04/)
* [Colaboratory | Jupyter-тетрадка по сводным таблицам (pivot tables)](https://colab.research.google.com/github/dm-fedorov/pandas_basic/blob/master/быстрое%20введение%20в%20pandas/Сводная%20таблица%20в%20pandas.ipynb)